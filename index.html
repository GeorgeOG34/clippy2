<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' 'unsafe-inline' http://localhost:11434 https://api.stackexchange.com/; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://esm.run; style-src 'self' 'unsafe-inline'">
  <link href="./styles.css" rel="stylesheet">
  <title>Hello World!</title>
</head>
<body style="overflow-x: hidden; overflow-y: hidden">
  <div class="popup-container">
    <div class="popup" id="popup1">
      The safest way to pass credentials to curl is to be prompted to insert them. This is what happens when passing the username as suggested earlier (-u USERNAME).

      But what if you can't pass the username that way? For instance the username might need to be part of the url and only the password be part of a json payload.

      tl;dr: This is how to use curl safely in this case:

      read -p "Username: " U; read -sp "Password: " P; curl --request POST -d "{\"password\":\"${P}\"}" https://example.com/login/${U}; unset P U
      read will prompt for both username and password from the command line, and store the submitted values in two variables that can be references in subsequent commands and finally unset.

      I'm gonna elaborate on why the other solutions are not ideal.

      Why are environment variables unsafe

      Access and exposure mode of the content of an environment variable, can not be tracked (ps -eww ) since the environment is implicitly available to a process
      Often apps grab the whole environment and log it for debugging or monitoring purposes (sometimes on log files plaintext on disk, especially after an app crashes)
      Environment variables are passed down to child processes (therefore breaking the principle of least privilege)
      Maintaining them is an issue: new engineers don't know they are there, and are not aware of requirements around them - e.g., not to pass them to sub-processes - since they're not enforced or documented.
      Why is it unsafe to type it into a command on the command line directly Because your secret then ends up being visible by any other user running ps -aux since that lists commands submitted for each currently running process. Also because your secrte then ends up in the bash history (once the shell terminates).

      Why is it unsafe to include it in a local file Strict POSIX access restriction on the file can mitigate the risk in this scenario. However, it is still a file on your file system, unencrypted at rest.
    </div>
  </div>

<img src="./Clippyicon.png" id="clippy"
     style="">

<!-- You can also require other files to run in this process -->

<script src="https://cdn.jsdelivr.net/npm/showdown@2.0/dist/showdown.min.js"></script>
<script type="module" src="./renderer.js"></script>
</body>
<style>

  .popup-container {
    -webkit-app-region: no-drag;
    height: 100px;
    bottom: 390px;
    position: absolute;
    display: flex;
    align-items: flex-end;
  }
  code {
    word-wrap: break-word;
  }

  #clippy {
    -webkit-app-region: drag;
    width: 250px;
    height: 400px;
    position: absolute;
    bottom: 0;
    right: 0;
  }

  .popup {
    left: 20vmin;
    width: 200px;
    position: relative;
    padding: 2vmin;
    background: #ffc;
    border-radius: 1vmin;
    border: 0.375vmin solid #666;
    font-size: 20px;
    font-family: Tahoma, "Comic Sans MS", Courier, sans-serif;
    line-height: 1.25;
  }

  .popup::before {
    content: "";
    display: block;
    position: absolute;
    top: 100%;
    right: 10%;
    width: 6vmin;
    height: 6vmin;
    border-left: 0.375vmin solid #666;
    background-image: linear-gradient(-45deg, transparent 50%, #666 0 54%, #ffc 0);
    transform: skew(55deg);
  }
</style>
</html>
